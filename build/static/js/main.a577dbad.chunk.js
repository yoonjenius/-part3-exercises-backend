(this["webpackJsonppart2-phonebook-ver2"]=this["webpackJsonppart2-phonebook-ver2"]||[]).push([[0],{19:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var o=t(2),c=t.n(o),r=t(14),a=t.n(r),u=(t(19),t(3)),i=(t(20),t(4)),s=t.n(i),l=t(0),d=function(e){var n=e.message;return null===n?null:Object(l.jsx)("div",{className:"error",children:n})},j=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],r=Object(o.useState)(""),a=Object(u.a)(r,2),i=a[0],j=a[1],b=Object(o.useState)(""),f=Object(u.a)(b,2),h=f[0],m=f[1],O=Object(o.useState)(""),p=Object(u.a)(O,2),v=p[0],g=p[1],x=Object(o.useState)([]),w=Object(u.a)(x,2),y=w[0],T=w[1],C=Object(o.useState)(null),S=Object(u.a)(C,2),k=S[0],F=S[1],L="http://localhost:3100/api/persons";Object(o.useEffect)((function(){console.log("useEffect"),s.a.get(L).then((function(e){console.log("Promise fulfilled"),c(e.data)}))}),[]);console.log("personArray",t);return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(d,{message:k}),Object(l.jsxs)("div",{children:[" ","Filter shown with:"," ",Object(l.jsx)("input",{onChange:function(e){var n=e.target.value;console.log(n),g(n);var o=t.filter((function(e){return e.name.toLowerCase().match(n.toLowerCase())}));console.log("filterResult",o),T(o)},value:v})]}),Object(l.jsx)("h2",{children:"Add a New"}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=t.map((function(e){return e.name})),o=t.map((function(e){return e.number}));if(n.includes(i)){if(o.includes(h))return window.alert("".concat(i," is already added to phonebook"));if(o.includes(h))return null;if(window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one which you input?"))){var r=t.find((function(e){return e.name===i})),a=L+"/"+r.id,u={name:i,number:h};s.a.put(a,u).then((function(e){return console.log("response.data:",e.data),F("".concat(i," und ").concat(h," are successfully saved")),setTimeout((function(){console.log("setTimeout"),F(null)}),3e3),c(t.map((function(n){return n.id!==r.id?n:e.data})))})).catch((function(e){alert("We couldn't a new data in the server")}))}}else if(!n.includes(i)){var l={name:i,number:h};s.a.post(L,l).then((function(e){console.log("personObejct",l),F("".concat(i," und ").concat(h," are successfully saved")),setTimeout((function(){console.log("setTimeout"),F(null)}),3e3),c(t.concat(l)),j(""),m("")})).catch((function(e){console.log("\ud504\ub860\ud2b8\uc5d4\ub4dc",e.response.data);var n=e.response.data;F(n.error),setTimeout((function(){console.log("setTimeout"),F(null)}),3e3)}))}},children:[Object(l.jsxs)("div",{children:[" ","name: ",Object(l.jsx)("input",{onChange:function(e){var n=e.target.value;console.log(n),j(n)},value:i})]}),Object(l.jsxs)("div",{children:[" ","number: ",Object(l.jsx)("input",{onChange:function(e){var n=e.target.value;console.log(n),m(n)},value:h})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]}),Object(l.jsx)("h2",{children:"Numbers"}),t.map((function(e){return Object(l.jsxs)("p",{children:[e.name," ",e.number," ",Object(l.jsx)("button",{onClick:function(){return function(e){var n=L+"/"+e,o=t.filter((function(n){return n.id!==e}));if(!window.confirm("Do you really want to delete?"))return null;s.a.delete(n).then((function(e){c(o)})).catch((function(e){F("".concat(i," und ").concat(h," were already removed from server")),setTimeout((function(){console.log("setTimeout"),F(null)}),3e3)}))}(e.id)},children:"delete"})]},e.name)})),Object(l.jsx)("h2",{children:"Filter Result"}),Object(l.jsx)("div",{children:y.map((function(e){return Object(l.jsxs)("p",{children:[e.name," ",e.number]},e.name)}))})]})},b=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,43)).then((function(n){var t=n.getCLS,o=n.getFID,c=n.getFCP,r=n.getLCP,a=n.getTTFB;t(e),o(e),c(e),r(e),a(e)}))};a.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(j,{})}),document.getElementById("root")),b()}},[[42,1,2]]]);
//# sourceMappingURL=main.a577dbad.chunk.js.map