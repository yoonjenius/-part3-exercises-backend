(this["webpackJsonppart2-phonebook-ver2"]=this["webpackJsonppart2-phonebook-ver2"]||[]).push([[0],{19:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(2),o=t.n(c),r=t(14),a=t.n(r),u=(t(19),t(3)),i=(t(20),t(4)),l=t.n(i),s=t(0),d=function(e){var n=e.message;return null===n?null:Object(s.jsx)("div",{className:"error",children:n})},j=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],r=Object(c.useState)(""),a=Object(u.a)(r,2),i=a[0],j=a[1],b=Object(c.useState)(""),f=Object(u.a)(b,2),h=f[0],m=f[1],O=Object(c.useState)(""),p=Object(u.a)(O,2),v=p[0],g=p[1],x=Object(c.useState)([]),w=Object(u.a)(x,2),y=w[0],C=w[1],S=Object(c.useState)(null),k=Object(u.a)(S,2),T=k[0],F=k[1],L="http://localhost:3100/api/persons";Object(c.useEffect)((function(){console.log("useEffect"),l.a.get(L).then((function(e){console.log("Promise fulfilled"),o(e.data)}))}),[]);console.log("personArray",t);return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(d,{message:T}),Object(s.jsxs)("div",{children:[" ","Filter shown with:"," ",Object(s.jsx)("input",{onChange:function(e){var n=e.target.value;console.log(n),g(n);var c=t.filter((function(e){return e.name.toLowerCase().match(n.toLowerCase())}));console.log("filterResult",c),C(c)},value:v})]}),Object(s.jsx)("h2",{children:"Add a New"}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=t.map((function(e){return e.name})),c=t.map((function(e){return e.number}));if(n.includes(i)){if(c.includes(h))return window.alert("".concat(i," is already added to phonebook"));if(c.includes(h))return null;if(window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one which you input?"))){var r=t.find((function(e){return e.name===i})),a=L+"/"+r.id,u={name:i,number:h};l.a.put(a,u).then((function(e){return console.log("response.data:",e.data),F("".concat(i," und ").concat(h," are successfully saved")),setTimeout((function(){console.log("setTimeout"),F(null)}),3e3),o(t.map((function(n){return n.id!==r.id?n:e.data})))})).catch((function(e){alert("We couldn't a new data in the server")}))}}else if(!n.includes(i)){var s={name:i,number:h};l.a.post(L,s).then((function(e){console.log("personObejct",s),F("".concat(i," und ").concat(h," are successfully saved")),setTimeout((function(){console.log("setTimeout"),F(null)}),3e3),o(t.concat(s)),j(""),m("")}))}},children:[Object(s.jsxs)("div",{children:[" ","name: ",Object(s.jsx)("input",{onChange:function(e){var n=e.target.value;console.log(n),j(n)},value:i})]}),Object(s.jsxs)("div",{children:[" ","number: ",Object(s.jsx)("input",{onChange:function(e){var n=e.target.value;console.log(n),m(n)},value:h})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]}),Object(s.jsx)("h2",{children:"Numbers"}),t.map((function(e){return Object(s.jsxs)("p",{children:[e.name," ",e.number," ",Object(s.jsx)("button",{onClick:function(){return function(e){var n=L+"/"+e,c=t.filter((function(n){return n.id!==e}));if(!window.confirm("do you really want to delete?"))return null;l.a.delete(n).then((function(e){o(c)})).catch((function(e){F("".concat(i," und ").concat(h," were already removed from server")),setTimeout((function(){console.log("setTimeout"),F(null)}),3e3)}))}(e.id)},children:"delete"})]},e.name)})),Object(s.jsx)("h2",{children:"Filter Result"}),Object(s.jsx)("div",{children:y.map((function(e){return Object(s.jsxs)("p",{children:[e.name," ",e.number]},e.name)}))})]})},b=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,43)).then((function(n){var t=n.getCLS,c=n.getFID,o=n.getFCP,r=n.getLCP,a=n.getTTFB;t(e),c(e),o(e),r(e),a(e)}))};a.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(j,{})}),document.getElementById("root")),b()}},[[42,1,2]]]);
//# sourceMappingURL=main.2889d323.chunk.js.map